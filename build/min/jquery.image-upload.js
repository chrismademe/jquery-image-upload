!function(n){n.fn.imageUpload=function(e){var a={container:this.parent(),allowed:["jpg","jpeg","gif","png"],form:"#form",handler:"upload.php"},o=n.extend({},a,e);this.on("change",function(){n(o.container).find(".iu-alert").remove(),n(o.container).append('<span class="iu-spinner"><img src="working.gif" width="20" height="20"></span>');var e=n(this).val(),a=e.substr(e.indexOf(".")+1),r=!1;n.each(o.allowed,function(n,e){return a===e?void(r=!0):void 0}),r?(data=new FormData(n(o.form)[0]),n.ajax({url:o.handler,type:"POST",xhr:function(){var e=n.ajaxSettings.xhr();return e},success:function(e){console.log(e),200===e.code?n(o.container).append('<span class="iu-alert iu-success">Upload complete.</span>'):(console.log(e),n(o.container).append('<span class="iu-alert iu-error">Something went wrong, your image was not uploaded.</span>')),n(".iu-spinner").remove()},error:function(e){console.log(e),n(o.container).append('<span class="iu-alert iu-error">Something went wrong, your image was not uploaded.</span>'),n(".iu-spinner").remove()},data:data,cache:!1,contentType:!1,processData:!1})):(n(o.container).append('<span class="iu-alert iu-error">Provided file is invalid.</span>'),n(o.container).find(".iu-spinner").remove())}),console.log(o)}}(jQuery);